<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.280">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title> - Ungulate Seasonal Ranges</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="dark">
<link href="site_libs/quarto-contrib/academicons-1.9.2/all.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/academicons-1.9.2/size.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="styles.css">
<link rel="stylesheet" href="academicons.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title"><i class="fa-solid fa-globe" aria-label="globe"></i></span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html">
 <span class="menu-text"><i class="fa-solid fa-house" aria-label="house"></i> Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html">
 <span class="menu-text"><i class="fa-solid fa-file" aria-label="file"></i> CV</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./eclipseproj.html">
 <span class="menu-text"><i class="fa-solid fa-moon" aria-label="moon"></i> Eclipse Code</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./fsvmproj.html">
 <span class="menu-text"><i class="fa-solid fa-tree" aria-label="tree"></i> FSVM</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./seasonalranges.html" aria-current="page">
 <span class="menu-text"><i class="fa-solid fa-paw" aria-label="paw"></i> Seasonal Ranges</span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#fa-chart-line-seasonal-range-analysis-dashboard" id="toc-fa-chart-line-seasonal-range-analysis-dashboard" class="nav-link active" data-scroll-target="#fa-chart-line-seasonal-range-analysis-dashboard"><i class="fa-solid fa-chart-line" aria-label="chart-line"></i> Seasonal Range Analysis Dashboard</a>
  <ul class="collapse">
  <li><a href="#fa-map-average-winter-range-map" id="toc-fa-map-average-winter-range-map" class="nav-link" data-scroll-target="#fa-map-average-winter-range-map"><i class="fa-solid fa-map" aria-label="map"></i> Average Winter Range Map</a></li>
  <li><a href="#fa-snowflake-annual-winter-ranges" id="toc-fa-snowflake-annual-winter-ranges" class="nav-link" data-scroll-target="#fa-snowflake-annual-winter-ranges"><i class="fa-solid fa-snowflake" aria-label="snowflake"></i> Annual Winter Ranges</a></li>
  </ul></li>
  <li><a href="#fa-layer-group-vegetation-classification-covariates" id="toc-fa-layer-group-vegetation-classification-covariates" class="nav-link" data-scroll-target="#fa-layer-group-vegetation-classification-covariates"><i class="fa-solid fa-layer-group" aria-label="layer-group"></i> Vegetation Classification Covariates</a>
  <ul class="collapse">
  <li><a href="#fa-scroll-python-function" id="toc-fa-scroll-python-function" class="nav-link" data-scroll-target="#fa-scroll-python-function"><i class="fa-solid fa-scroll" aria-label="scroll"></i> Python Function</a></li>
  <li><a href="#fa-code-r-code" id="toc-fa-code-r-code" class="nav-link" data-scroll-target="#fa-code-r-code"><i class="fa-solid fa-code" aria-label="code"></i> R code</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Ungulate Seasonal Ranges</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>I am currently an Associate Research Scientist for the Wyoming Cooperative Fish and Wildlife Research Unit modeling ungulate seasonal ranges and migrations for Idaho Department of Fish and Game in support of <a href="https://www.doi.gov/sites/doi.gov/files/uploads/so_3362_migration.pdf">S.O. 3362</a>. So far, I’ve completed winter range models for mule deer using the random forest machine learning algorithm in a resource selection function framework. I assembled these predictions into a dashboard to assist in assessing the predictions and outputs. Included in the dashboard are maps depicting the average predicted winter range for mule deer in each of IDFG’s mule deer data analysis units (DAUs). In addition, I’ve started to analyze the changes in winter range predictions across years.</p>
<section id="fa-chart-line-seasonal-range-analysis-dashboard" class="level2">
<h2 class="anchored" data-anchor-id="fa-chart-line-seasonal-range-analysis-dashboard"><i class="fa-solid fa-chart-line" aria-label="chart-line"></i> Seasonal Range Analysis Dashboard</h2>
<p><img src="https://github.com/r2j2ritson/r2j2ritson.github.io/_images/animation_dashboard.gif" class="img-fluid"></p>
<section id="fa-map-average-winter-range-map" class="level3">
<h3 class="anchored" data-anchor-id="fa-map-average-winter-range-map"><i class="fa-solid fa-map" aria-label="map"></i> Average Winter Range Map</h3>
<p><img src="https://github.com/r2j2ritson/r2j2ritson.github.io/_images/SmokeyBoiseMuleDeer_AverageWinterRange.png" width="800" height="670"></p>
</section>
<section id="fa-snowflake-annual-winter-ranges" class="level3">
<h3 class="anchored" data-anchor-id="fa-snowflake-annual-winter-ranges"><i class="fa-solid fa-snowflake" aria-label="snowflake"></i> Annual Winter Ranges</h3>
<p><img src="https://github.com/r2j2ritson/r2j2ritson.github.io//Smokey-Boise_animation.gif" class="img-fluid"></p>
</section>
</section>
<section id="fa-layer-group-vegetation-classification-covariates" class="level2">
<h2 class="anchored" data-anchor-id="fa-layer-group-vegetation-classification-covariates"><i class="fa-solid fa-layer-group" aria-label="layer-group"></i> Vegetation Classification Covariates</h2>
<p>A major component of the seasonal range models is IDFG’s vegetation classification covariates which are derived from <a href="https://landfire.gov/">LANDFIRE</a>. The models explicitly require each vegetation class to be transformed to a focal value based on the average daily movement distance of individuals in the DAU. To streamline this covariate transformation, I wrote a Python function using ESRI’s <code>arcpy</code> and Spatial Analyst tools, which are called by an R script I wrote to iterate the process over each collection of DAU covariates.</p>
<section id="fa-scroll-python-function" class="level3">
<h3 class="anchored" data-anchor-id="fa-scroll-python-function"><i class="fa-solid fa-scroll" aria-label="scroll"></i> Python Function</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># --------------------------------------------------------</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate Hurley Vegetation Focal Statistics</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Author: Robert Ritson, Associate Research Scientist (UW)</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Last Updated: 5/10/2022</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Description: Calculate square meters of Hurley</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co">#   vegetation classes (binary rasters derrived from LANDFIRE)</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co">#   given a mean daily movement distance (from an ungulate population),</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co">#   clipped by a population DAU boundary</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># --------------------------------------------------------</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co">#Import modules</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> arcpy</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> arcpy.sa <span class="im">import</span> <span class="op">*</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> datetime</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> csv</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>arcpy.CheckOutExtension(<span class="st">"Spatial"</span>)</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="co">#Define function</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> hveg_focal(path_to_dau, mdm_ci95, path_to_hveg, dau_hveg_folder, scratch <span class="op">=</span> <span class="st">"C:</span><span class="ch">\\</span><span class="st">Users</span><span class="ch">\\</span><span class="st">rritson</span><span class="ch">\\</span><span class="st">Documents</span><span class="ch">\\</span><span class="st">ArcGIS</span><span class="ch">\\</span><span class="st">scratch</span><span class="ch">\\</span><span class="st">"</span>):</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span> <span class="st">'begin script on '</span><span class="op">+</span>datetime.datetime.now().date().isoformat()<span class="op">+</span><span class="st">' at '</span><span class="op">+</span>datetime.datetime.now().time().isoformat()[<span class="dv">0</span>:<span class="dv">8</span>]</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Set path to folders and workspace</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>        dauws <span class="op">=</span> path_to_dau</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>        rastws <span class="op">=</span> path_to_hveg</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>        outws <span class="op">=</span> dau_hveg_folder</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>        neighborhood <span class="op">=</span> arcpy.sa.NbrCircle(mdm_ci95,<span class="st">"MAP"</span>)</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>        arcpy.env.overwriteOuptput <span class="op">=</span> <span class="va">False</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>        arcpy.env.workspace <span class="op">=</span> scratch</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Buffer Selected DAU by provided mean daily movement</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span> <span class="st">'buffering DAU shape by mean daily movement input (meters)'</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>        arcpy.Buffer_analysis(dauws,scratch<span class="op">+</span><span class="st">'</span><span class="ch">\\</span><span class="st">DAU_Buffer.shp'</span>, mdm_ci95,<span class="st">"FULL"</span>,<span class="st">"ROUND"</span>,<span class="st">"NONE"</span>,<span class="st">""</span>,<span class="st">"PLANAR"</span>)</span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>        <span class="co"># List Hurley Vegetation Rasters</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>        arcpy.env.workspace <span class="op">=</span> rastws</span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>        <span class="cf">try</span>:</span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span> <span class="st">'listing Hveg rasters'</span></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>            hveg_list <span class="op">=</span> [hveg <span class="cf">for</span> hveg <span class="kw">in</span> arcpy.ListRasters()]</span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>        <span class="cf">except</span>:  <span class="bu">print</span> arcpy.GetMessages(<span class="dv">2</span>)</span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Clip Hurley Vegetation Raster to buffered DAU and calculate focal statistics</span></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>        arcpy.env.workspace <span class="op">=</span> scratch</span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> hveg <span class="kw">in</span> hveg_list:</span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span> <span class="st">'loading raster '</span><span class="op">+</span>hveg</span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>            arcpy.MakeRasterLayer_management(rastws<span class="op">+</span><span class="st">'/'</span><span class="op">+</span>hveg,<span class="st">'temp_rast.tif'</span>,<span class="st">""</span>,scratch<span class="op">+</span><span class="st">'/DAU_Buffer.shp'</span>,<span class="st">""</span>) <span class="co">#load raster and clip to buffered DAU extent</span></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span> <span class="st">'calculating focal statistics'</span></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>            arcpy.CheckOutExtension(<span class="st">"Spatial"</span>)</span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>            fstat <span class="op">=</span> FocalStatistics(<span class="st">'temp_rast.tif'</span>,  neighborhood, <span class="st">"SUM"</span>, <span class="st">"DATA"</span>) <span class="co">#Focal sum of binaries by mean daily movement distance</span></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span> <span class="st">'converting to square meters'</span></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>            outrast <span class="op">=</span> fstat <span class="op">*</span> (<span class="dv">30</span><span class="op">^</span><span class="dv">2</span>) <span class="co">#multiply focal sum by cell dimensions (convert to square meters)</span></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a>            outrast.save(outws<span class="op">+</span>hveg) <span class="co">#save output</span></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span> hveg<span class="op">+</span><span class="st">' raster saved to '</span><span class="op">+</span>outws<span class="op">+</span><span class="st">' at '</span><span class="op">+</span>datetime.datetime.now().time().isoformat()[<span class="dv">0</span>:<span class="dv">8</span>]</span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span> <span class="st">'Finished: Completed Hurley vegetation density rasters for '</span><span class="op">+</span>dauws<span class="op">+</span><span class="st">' located in '</span><span class="op">+</span>outws</span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span> <span class="st">'script completed on '</span><span class="op">+</span>datetime.datetime.now().date().isoformat()<span class="op">+</span><span class="st">' at '</span><span class="op">+</span>datetime.datetime.now().time().isoformat()[<span class="dv">0</span>:<span class="dv">8</span>]</span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span>:  <span class="bu">print</span> arcpy.GetMessages(<span class="dv">2</span>)</span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a>arcpy.CheckInExtension(<span class="st">"Spatial"</span>)</span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a><span class="co"># # # # # </span><span class="re">END</span><span class="co"> OF FUNCTION # # # # # # #</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="fa-code-r-code" class="level3">
<h3 class="anchored" data-anchor-id="fa-code-r-code"><i class="fa-solid fa-code" aria-label="code"></i> R code</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Hurley Vegetation Density Raster Calculations ##</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="do">### Loop through remaining DAUs (~10min per DAU) </span><span class="al">###</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Load package</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(dplyr)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co">#devtools::install_github("rstudio/reticulate")</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co">#Sys.setenv(RETICULATE_PYTHON = "C:\\Python27\\ArcGIS10.8\\\\pythonw.exe")</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="fu">Sys.setenv</span>(<span class="at">RETICULATE_PYTHON =</span> <span class="st">'C:/Users/rritson/AppData/Local/Programs/ArcGIS/Pro/bin/Python/envs/arcgispro-py3/python.exe'</span>)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(reticulate)</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="co">#DAU List</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>dau_list <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">st_read</span>(<span class="st">'C:/Users/rritson/Documents/Projects/MuleDeer_SeasonalRanges/DAU_BBox_10kbuff.shp'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>(.) <span class="sc">%&gt;%</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(NAME) <span class="sc">%&gt;%</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>  <span class="co">#dplyr::filter(NAME == "Island Park")</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(NAME <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Bannock"</span>,<span class="st">"Caribou"</span>,<span class="st">"Mountain Valley"</span>,<span class="st">"Portneuf"</span>,<span class="st">"Weiser-McCall"</span>))</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>  <span class="co">#dplyr::filter(!(NAME %in% c("Bitterroot","Panhandle","Lower Salmon","Snake River","Smokey-Boise","Island Park")))</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="co">#DAU shape (all)</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>dau_shp <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">st_read</span>(<span class="st">'C:/Users/rritson/Documents/Projects/MuleDeer_SeasonalRanges/DAU_BBox_10kbuff.shp'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>  <span class="co">#dplyr::select(-GlobalID,-Shape_Leng,-Shape_Area) %&gt;% </span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>  sfheaders<span class="sc">::</span><span class="fu">sf_remove_holes</span>(.)</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a><span class="co">#Movement Data</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"C:/Users/rritson/Documents/Projects/MuleDeer_SeasonalRanges/Winter_RSF/MD_Winter_Locs_1pd.rds"</span>) <span class="sc">%&gt;%</span> <span class="fu">as.data.frame</span>(.)</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Check R Session Info</span></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="fu">sessionInfo</span>()<span class="sc">$</span>R.version<span class="sc">$</span>arch <span class="sc">!=</span> <span class="st">"i386"</span>){</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">"STOP: Must run R in 32-bit Architecture to source 'arcpy'"</span>)</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="fu">paste0</span>(<span class="fu">sessionInfo</span>()<span class="sc">$</span>R.version<span class="sc">$</span>major,<span class="st">"."</span>,<span class="fu">sessionInfo</span>()<span class="sc">$</span>R.version<span class="sc">$</span>minor) <span class="sc">&gt;</span> <span class="st">"4.0.4"</span>){</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">"STOP: Must run R in version prior or equal to 4.0.4 to source 'arcpy'"</span>) </span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>  <span class="co"># reticulate does not want to work with R version 4.1.0...</span></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Initiate Python before beginning loop</span></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a><span class="co">#reticulate::use_python("C:\\Python27\\ArcGIS10.8\\\\pythonw.exe", required = T)</span></span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>reticulate<span class="sc">::</span><span class="fu">use_python</span>(<span class="st">'C:/Users/rritson/AppData/Local/Programs/ArcGIS/Pro/bin/Python/envs/arcgispro-py3/python.exe'</span>, <span class="at">required =</span> T)</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>reticulate<span class="sc">::</span><span class="fu">py_config</span>()</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>reticulate<span class="sc">::</span><span class="fu">source_python</span>(<span class="st">"C:/Users/rritson/Documents/Python Scripts/hveg_focal_func.py"</span>)</span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a><span class="co">#reticulate::source_python("C:/Users/rritson/Documents/Python Scripts/hveg_focal_func_sing.py") #for dealing with a single raster (must change file paths below if so)</span></span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through DAUs</span></span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(dau_list)){</span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Select DAU</span></span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Beginning DAU:"</span>,dau_list[i,],<span class="st">"("</span>,<span class="fu">nrow</span>(dau_list)<span class="sc">-</span>i,<span class="st">"remaining)..."</span>))</span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>  dau_sel <span class="ot">&lt;-</span> dau_list[i,] </span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create folder for outputs</span></span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a>  <span class="co">#print("Creating output folder...")</span></span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a>  <span class="co">#dir.create("F:/Seasonal_range_covars/mdmci95_2buff") </span></span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a>  <span class="co">#dir.create(paste0("F:/Seasonal_range_covars/mdmci95_2buff/",dau_sel)) </span></span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Write DAU shapefile</span></span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a>  <span class="co">#print("Writing shapefile...")</span></span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a>  <span class="co">#dau &lt;- dau_shp %&gt;% dplyr::filter(NAME == dau_sel)</span></span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a>  <span class="co">#sf::write_sf(dau,paste0('C:/Users/rritson/Documents/Projects/MuleDeer_SeasonalRanges/SeasonalRanges/',dau_sel,".shp"),append=F)</span></span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Get Mean Daily Movements for DAU</span></span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">"Accessing mean daily movement (95% CI, in meters)..."</span>)</span>
<span id="cb2-63"><a href="#cb2-63" aria-hidden="true" tabindex="-1"></a>  mdm_ci95 <span class="ot">&lt;-</span> dat <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(DAU <span class="sc">==</span> dau_sel) <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(MDM_CI95_avg) <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">slice</span>(<span class="dv">1</span>)</span>
<span id="cb2-64"><a href="#cb2-64" aria-hidden="true" tabindex="-1"></a>  mdm_ci95 <span class="ot">&lt;-</span> mdm_ci95[[<span class="dv">1</span>]]</span>
<span id="cb2-65"><a href="#cb2-65" aria-hidden="true" tabindex="-1"></a>  mdm_ci95_2 <span class="ot">&lt;-</span> mdm_ci95 <span class="sc">/</span> <span class="dv">2</span></span>
<span id="cb2-66"><a href="#cb2-66" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-67"><a href="#cb2-67" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calculate Hurley vegetation density raster for DAU: Mean Daily Movement</span></span>
<span id="cb2-68"><a href="#cb2-68" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">"Reticulating HVeg Density Raster Calculation (Mean Daily Movement)..."</span>)</span>
<span id="cb2-69"><a href="#cb2-69" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hveg_focal</span>(<span class="at">path_to_dau =</span> <span class="fu">paste0</span>(<span class="st">'C:/Users/rritson/Documents/Projects/MuleDeer_SeasonalRanges/SeasonalRanges/'</span>,dau_sel,<span class="st">".shp"</span>),</span>
<span id="cb2-70"><a href="#cb2-70" aria-hidden="true" tabindex="-1"></a>             <span class="at">mdm_ci95 =</span> mdm_ci95, <span class="co">#mean daily movement</span></span>
<span id="cb2-71"><a href="#cb2-71" aria-hidden="true" tabindex="-1"></a>             <span class="at">path_to_hveg =</span> <span class="st">"F:</span><span class="sc">\\</span><span class="st">Seasonal_range_covars</span><span class="sc">\\</span><span class="st">hveg"</span>,</span>
<span id="cb2-72"><a href="#cb2-72" aria-hidden="true" tabindex="-1"></a>             <span class="at">dau_hveg_folder =</span> <span class="fu">paste0</span>(<span class="st">"F:/Seasonal_range_covars/mdmci95_buff/"</span>,dau_sel,<span class="st">"/"</span>), <span class="co">#CHANGE THIS!!! (to match output folder)</span></span>
<span id="cb2-73"><a href="#cb2-73" aria-hidden="true" tabindex="-1"></a>             <span class="at">scratch =</span> <span class="st">"C:/Users/rritson/Documents/ArcGIS/scratch"</span>)</span>
<span id="cb2-74"><a href="#cb2-74" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-75"><a href="#cb2-75" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Delete temp files</span></span>
<span id="cb2-76"><a href="#cb2-76" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lapply</span>(<span class="fu">list.files</span>(<span class="st">"C:/Users/rritson/Documents/ArcGIS/scratch"</span>,<span class="at">full.names =</span> T),file.remove)</span>
<span id="cb2-77"><a href="#cb2-77" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gc</span>()</span>
<span id="cb2-78"><a href="#cb2-78" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-79"><a href="#cb2-79" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calculate Hurley vegetation density raster for DAU: One-half Mean Daily Movement</span></span>
<span id="cb2-80"><a href="#cb2-80" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">"Reticulating HVeg Density Raster Calculation (One-Half Mean Daily Movement)..."</span>)</span>
<span id="cb2-81"><a href="#cb2-81" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hveg_focal</span>(<span class="at">path_to_dau =</span> <span class="fu">paste0</span>(<span class="st">'C:/Users/rritson/Documents/Projects/MuleDeer_SeasonalRanges/SeasonalRanges/'</span>,dau_sel,<span class="st">".shp"</span>),</span>
<span id="cb2-82"><a href="#cb2-82" aria-hidden="true" tabindex="-1"></a>             <span class="at">mdm_ci95 =</span> mdm_ci95_2, <span class="co">#one-half mean daily movement</span></span>
<span id="cb2-83"><a href="#cb2-83" aria-hidden="true" tabindex="-1"></a>             <span class="at">path_to_hveg =</span> <span class="st">"F:</span><span class="sc">\\</span><span class="st">Seasonal_range_covars</span><span class="sc">\\</span><span class="st">hveg"</span>,</span>
<span id="cb2-84"><a href="#cb2-84" aria-hidden="true" tabindex="-1"></a>             <span class="at">dau_hveg_folder =</span> <span class="fu">paste0</span>(<span class="st">"F:/Seasonal_range_covars/mdmci95_2buff/"</span>,dau_sel,<span class="st">"/"</span>), <span class="co">#CHANGE THIS!!! (to match output folder)</span></span>
<span id="cb2-85"><a href="#cb2-85" aria-hidden="true" tabindex="-1"></a>             <span class="at">scratch =</span> <span class="st">"C:/Users/rritson/Documents/ArcGIS/scratch"</span>)</span>
<span id="cb2-86"><a href="#cb2-86" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-87"><a href="#cb2-87" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Delete temp files</span></span>
<span id="cb2-88"><a href="#cb2-88" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lapply</span>(<span class="fu">list.files</span>(<span class="st">"C:/Users/rritson/Documents/ArcGIS/scratch"</span>,<span class="at">full.names =</span> T),file.remove)</span>
<span id="cb2-89"><a href="#cb2-89" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gc</span>()</span>
<span id="cb2-90"><a href="#cb2-90" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">© 2023 Robert Ritson</div>   
      <div class="nav-footer-center">powered by <a href="https://quarto.org">quarto</a></div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/r2j2ritson/RSpatial_Wildlife">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="https://www.researchgate.net/profile/Robert-Ritson"><i class="ai  ai-researchgate" title="" style="color:"></i></a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="https://scholar.google.com/citations?user=NfH3WwcAAAAJ&amp;hl=en"><i class="ai  ai-google-scholar" title="" style="color:"></i></a>
  </li>  
</ul>
    </div>
  </div>
</footer>



</body></html>